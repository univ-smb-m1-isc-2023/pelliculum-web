<div>
    <!-- Graph -->
    <div class="flex justify-center items-end space-x-2">
        <app-stars [stars]="1" [value]="1" size="w-2" class="mb-2"></app-stars>
        <div class="flex space-x-[3px]">
            @for (rating of ratings; track rating) {
                <div class="popover popover-hover">
                    <label class="popover-trigger cursor-pointer">
                        <!-- Conteneur de la barre et du fond -->
                        <div class="relative w-3" [style.height]="getHeight(this.highestRating)">
                            <!-- Fond de la barre (toujours Ã  hauteur maximale) -->
                            <div class="absolute inset-0 bg-transparent rounded-t-sm"></div>
                            <!-- Barre actuelle (hauteur variable) -->
                            <div class="absolute bottom-0 bg-red-900 rounded-t-sm leading-none w-3"
                                 [style.height]="getHeight(rating)"></div>
                        </div>
                    </label>
                    <div class="popover-content popover-top-center w-48">
                        <div class="popover-arrow"></div>
                        <div class="flex justify-center text-sm items-center space-x-1">
                            <p>{{ rating }} note{{ rating > 1 ? 's' : '' }}</p>
                            <app-stars [value]="$index/2" [stars]="5" size="w-2"></app-stars>
                            <p>{{ getPercentage(rating) }}</p>
                        </div>
                    </div>
                </div>
            }
        </div>
        <div class="mb-2 flex flex-col justify-center items-center space-y-1">

            <div class="popover popover-hover">
                <label class="popover-trigger cursor-pointer">
                    <p class="text-xl text-primary">3.5</p>

                </label>
                <div class="popover-content popover-top-center w-56">
                    <div class="popover-arrow"></div>
                    <div class="flex justify-center text-sm items-center space-x-1">
                        <p>Moyenne de {{averageRating}} sur {{reviews.length}} note{{reviews.length > 1 ? 's' : ''}}</p>
                    </div>
                </div>
            </div>


            <app-stars [stars]="5" [value]="5" size="w-2"></app-stars>

        </div>

    </div>
</div>
