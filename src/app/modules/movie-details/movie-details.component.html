@if (currentMovie) {
    <div class="flex flex-col space-y-56">
        <div class="relative">

            <!-- Backdrop with gradients -->
            <app-backdrop class="opacity-75" [backdropPath]="currentMovie.backdrop_path" />
            <div class="absolute inset-0 bottom-0 bg-gradient-to-t from-[#100F10] to-transparent to-100%"></div>


            <!-- Poster and movie details -->
            <div class="absolute -bottom-48 flex flex-row space-x-4 px-40 w-full">
                <!-- Poster -->
                <img class="w-3/12 h-fit rounded-lg"
                     [src]="'https://image.tmdb.org/t/p/w220_and_h330_face' + currentMovie.poster_path"
                     alt="poster du film" />
                <!-- Movie details -->
                <div class="w-7/12 flex flex-col space-y-3">
                    <!-- Title -->
                    <p class="text-4xl font-bold">{{ currentMovie.title }}</p>

                    <div class="flex flex-col">
                        <!-- Rating -->
                        <app-stars size="w-5" [stars]="5" [value]="currentMovie.vote_average" class="pb-1" />

                        <!-- Date and duration -->
                        <div class="flex flex-row space-x-4">
                            <!-- Date -->
                            <div class="flex flex-row space-x-2">
                                <p class="font-bold">Sortie:</p>
                                <p>{{ currentMovie.release_date.substring(0, 4) }}</p>
                            </div>
                            <!-- Duration -->
                            <div class="flex flex-row space-x-2">
                                <p class="font-bold">Dur√©e:</p>
                                <p>{{ currentMovie.runtime }} minutes</p>
                            </div>
                        </div>

                        <!-- Genres -->
                        <div class="flex flex-row items-baseline space-x-2">
                            <p class="font-bold">Genres:</p>
                            @for (genre of genres; track genre.id; let first = $first; let last = $last) {
                                <span
                                    [class]="'text-white xl:text-sm lg:text-sm md:text-xs sm:text-xs ' + (first ? 'pr-2' : 'px-2') + ' ' + (last ? '' : 'border-r border-gray-700')"> {{ genre.name }} </span>
                            }
                        </div>
                        <!-- Overview -->
                        <p class="mt-4 text-lg">{{ currentMovie.overview }}</p>
                    </div>
                </div>

                <div class="w-2/12 bg-red-950">

                </div>
            </div>
        </div>

        <!-- Rest of the page -->
        <div class="flex flex-col px-40">
            <app-movie-details-tabs (tabSelected)="selectTab($event)">
                @if (activeTab === 'cast') {
                    <app-movie-details-cast-tabs [id]="currentMovie.id"></app-movie-details-cast-tabs>
                } @else {
                    <app-movie-details-crew-tabs [id]="currentMovie.id"></app-movie-details-crew-tabs>
                }
            </app-movie-details-tabs>
            <app-movie-details-rating [id]="currentMovie.id"></app-movie-details-rating>
        </div>
    </div>
}
